<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MLB Daily AI Creator</title>
<style>
  body { margin: 0; padding: 0; background-color: #f4f4f7; font-family: -apple-system, 'Segoe UI', sans-serif; color: #333; }
  .container { max-width: 680px; margin: 0 auto; background-color: #fff; }
  .header { background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); padding: 28px 24px; text-align: center; }
  .header h1 { color: #fff; margin: 0; font-size: 24px; font-weight: 700; }
  .header p { color: rgba(255,255,255,0.85); margin: 6px 0 0; font-size: 14px; }
  .section { padding: 20px 24px; border-bottom: 1px solid #eee; }
  .section:last-of-type { border-bottom: none; }
  .section-title { font-size: 18px; font-weight: 700; color: #1a2a6c; border-bottom: 2px solid #1a2a6c; padding-bottom: 8px; margin-bottom: 16px; }
  
  /* 핵심 뉴스 */
  .news-item { padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
  .news-item:last-child { border-bottom: none; }
  .news-top { display: flex; align-items: flex-start; }
  .news-rank { flex-shrink: 0; background-color: #1a2a6c; color: #fff; border-radius: 4px; width: 28px; height: 24px; text-align: center; line-height: 24px; font-size: 13px; font-weight: 700; margin-right: 12px; margin-top: 1px; }
  .news-rank.buzz-high { background-color: #c0392b; }
  .news-rank.buzz-medium { background-color: #d35400; }
  .news-rank.buzz-low { background-color: #7f8c8d; }
  .news-body { flex: 1; }
  .news-headline { font-size: 16px; font-weight: 700; color: #2c3e50; line-height: 1.4; margin: 0 0 4px; }
  .news-headline a { color: #2c3e50; text-decoration: none; }
  .news-headline a:hover { text-decoration: underline; }
  .news-summary { font-size: 14px; color: #555; margin: 0 0 8px; line-height: 1.6; }
  .news-meta { font-size: 12px; color: #999; }
  .news-meta span { margin-right: 10px; }
  .tag { display: inline-block; background-color: #ecf0f1; border-radius: 3px; padding: 2px 8px; font-size: 11px; color: #34495e; font-weight: 600; margin-right: 6px; }

  /* 선수 이동 & 유망주 */
  .sub-section { margin-bottom: 20px; }
  .sub-section:last-child { margin-bottom: 0; }
  .sub-section-title { font-size: 15px; font-weight: 700; color: #34495e; border-bottom: 1px solid #dfe6ed; padding-bottom: 6px; margin-bottom: 10px; }
  .movement-item, .prospect-item { padding: 8px 0; border-bottom: 1px solid #f0f0f0; }
  .movement-item:last-child, .prospect-item:last-child { border-bottom: none; }
  .movement-headline, .prospect-headline { font-size: 14px; font-weight: 600; color: #333; margin: 0 0 4px; }
  .movement-summary, .prospect-summary { font-size: 13px; color: #666; margin: 0 0 6px; line-height: 1.5; }
  .movement-meta, .prospect-meta { font-size: 11px; color: #999; }

  .footer { text-align: center; padding: 20px; font-size: 12px; color: #aaa; border-top: 1px solid #eee; }
</style>
</head>
<body>
<div class="container">
  <!-- 헤더 -->
  <div class="header">
    <h1>MLB Daily AI Creator</h1>
    <p>{{ data.retrieved_at }} 기준</p>
  </div>

  <!-- 핵심 뉴스 -->
  {% if data.core_news %}
  <div class="section">
    <div class="section-title">핵심 뉴스</div>
    {% for item in data.core_news %}
    <div class="news-item">
      <div class="news-top">
        <div class="news-rank buzz-{{ item.buzz | default('low') }}">{{ item.rank }}</div>
        <div class="news-body">
          <div class="news-headline">
            {% if item.source_url %}<a href="{{ item.source_url }}" target="_blank" rel="noopener noreferrer">{{ item.headline }}</a>{% else %}{{ item.headline }}{% endif %}
          </div>
          <p class="news-summary">{{ item.summary }}</p>
          <div class="news-meta">
            <span class="tag">{{ item.category | upper }}</span>
            <span><b>출처:</b> {{ item.source }} | {{ item.published_at }}</span>
            {% if item.teams %}<span><b>팀:</b> {{ item.teams | join(', ') }}</span>{% endif %}
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- 선수 이동 -->
  {% set pm = data.player_movement %}
  {% if pm.transactions or pm.rumors or pm.roster_moves %}
  <div class="section">
    <div class="section-title">선수 이동</div>
    
    {% if pm.transactions %}
    <div class="sub-section">
      <div class="sub-section-title">선수 이적/계약</div>
      {% for item in pm.transactions %}
      <div class="movement-item">
        <div class="movement-headline">{{ item.headline }}</div>
        <p class="movement-summary">{{ item.summary }}</p>
        <div class="movement-meta"><b>출처:</b> {{ item.source }} | {{ item.published_at }}</div>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    {% if pm.rumors %}
    <div class="sub-section">
      <div class="sub-section-title">이적 루머</div>
      {% for item in pm.rumors %}
      <div class="movement-item">
        <div class="movement-headline">{{ item.headline }}</div>
        <p class="movement-summary">{{ item.summary }}</p>
        <div class="movement-meta"><b>출처:</b> {{ item.source }} | {{ item.published_at }}</div>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    {% if pm.roster_moves %}
    <div class="sub-section">
      <div class="sub-section-title">로스터 변경</div>
      {% for item in pm.roster_moves %}
      <div class="movement-item">
        <div class="movement-headline">{{ item.headline }}</div>
        <p class="movement-summary">{{ item.summary }}</p>
        <div class="movement-meta"><b>출처:</b> {{ item.source }} | {{ item.published_at }}</div>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>
  {% endif %}

  <!-- 유망주 동향 -->
  {% if data.prospects %}
  <div class="section">
    <div class="section-title">유망주 동향</div>
    {% for item in data.prospects %}
    <div class="prospect-item">
      <div class="prospect-headline">{{ item.headline }}</div>
      <p class="prospect-summary">{{ item.summary }}</p>
      <div class="prospect-meta">
        <span><b>출처:</b> {{ item.source }} | {{ item.published_at }}</span>
        {% if item.teams %}<span><b>팀:</b> {{ item.teams | join(', ') }}</span>{% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- 푸터 -->
  <div class="footer">
    MLB Daily AI Creator &middot; Powered by Gemini
  </div>
</div>
</body>
</html>
